<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OpenRocket Water Rocket Tutorial</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/inter-ui/3.19.3/inter.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/intro.js/6.0.0/intro.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/intro.js/6.0.0/introjs.min.css">
</head>
<body>
    <div class="tutorial-container">
        <!-- Left Sidebar Navigation -->
        <div class="sidebar">
            <div class="sidebar-logo">OPENROCKET<br>WATER ROCKET</div>
            <div class="step-button active" data-step="0" data-tooltip="Introduction">
                <i class="fas fa-list-ol"></i>
            </div>
            <div class="step-button" data-step="1" data-tooltip="Creating the Body Tube">
                <span>1</span>
            </div>
            <div class="step-button" data-step="2" data-tooltip="Adding the Transition">
                <span>2</span>
            </div>
            <div class="step-button" data-step="3" data-tooltip="Attaching the Fins">
                <span>3</span>
            </div>
            <div class="step-button" data-step="4" data-tooltip="Adding and Configuring a Nose Cone">
                <span>4</span>
            </div>
            <div class="step-button" data-step="5" data-tooltip="Running Flight Simulations">
                <span>5</span>
            </div>
        </div>

        <!-- Middle Instructions Panel -->
        <div class="instructions-panel">
            <h1 id="current-step-title">Introduction</h1>
            
            <div id="step-instructions">
                <!-- Will be populated by JavaScript -->
            </div>

            <!-- Navigation Buttons -->
            <div class="navigation">
                <button id="prevButton" class="nav-button" disabled><i class="fas fa-arrow-left"></i> Previous</button>
                <button id="nextButton" class="nav-button">Next <i class="fas fa-arrow-right"></i></button>
            </div>

            <!-- Progress Bar -->
            <div class="progress-container">
                <div class="progress-text">Progress: <span id="progress-percentage">0%</span></div>
                <div class="progress-bar">
                    <div class="progress" style="width: 0%;"></div>
                </div>
            </div>

            <div class="footer">
                Made with <span style="color: var(--accent-color);">â™¥</span> by <span id="creator-name">Buckley</span>
            </div>
        </div>

        <!-- Right Content Display Area -->
        <div class="content-display">
            <div class="card">
                <h2 id="content-title">Introduction</h2>
                <div id="media-content">
                    <!-- Will be populated by JavaScript -->
                </div>
            </div>
        </div>
    </div>

    <!-- Modal for viewing images -->
    <div id="imageModal" class="modal">
        <span class="modal-close">&times;</span>
        <img id="modalImage" class="modal-content">
    </div>

    <script>
        // Tutorial content configuration
        const stepTitles = [
            "Introduction",
            "Creating the Body Tube",
            "Adding the Transition",
            "Attaching the Fins",
            "Adding and Configuring a Nose Cone",
            "Running Flight Simulations"
        ];

        // Define your step instructions (middle panel content)
        const stepInstructions = [
            // Step 0: Introduction
            `<h3>Learning Intentions and Success Criteria</h3>
            
            <div class="card">
                <p><strong>Learning Intentions:</strong></p>
                <ol class="steps-list">
                    <li>Learn how to configure a water rocket design in OpenRocket</li>
                    <li>Understand how to set up rocket components including body tube, transitions, fins, and nose cone</li>
                    <li>Learn how to run flight simulations and analyse data</li>
                </ol>
            
                <p><strong>Success Criteria:</strong></p>
                <ol class="steps-list">
                    <li>Successfully create a complete water rocket design in OpenRocket</li>
                    <li>Configure all components with accurate dimensions and materials</li>
                    <li>Run simulations and interpret flight data to predict performance</li>
                </ol>
            </div>`,
            
            // Step 1: Creating the Body Tube
            `<h3>Creating the Body Tube</h3>
            <p>This represents the main cylindrical section of your water bottle.</p>
            
            <div class="card">
                <h4>Configuration Steps:</h4>
                <ol class="steps-list">
                    <li><strong>Select the Component:</strong> Click on "Sustainer" in the left-hand rocket tree.</li>
                    <li><strong>Add Body Tube:</strong> Click the Body Tube icon under "Body Components and Fin Sets."</li>
                </ol>
            </div>

            <div class="alert-box alert-info">
                <p><strong><i class="fas fa-ruler"></i> Understanding Diameter Measurements</strong></p>
                <p>Before setting dimensions, it's important to understand the difference between outer diameter, inner diameter, and wall thickness. Refer to the diagram on the right.</p>
            </div>

            <div class="card">
                <ol class="steps-list" start="3">
                    <li><strong>Set Dimensions:</strong>
                        <ul>
                            <li>Enter the <strong>Length</strong> and <strong>Outer diameter</strong> of your bottle.</li>
                            <li>Uncheck "Automatic" next to Inner diameter to manually set the <strong>Wall thickness</strong>.</li>
                        </ul>
                    </li>
                    <li><strong>Select Material:</strong> In the General tab, use the dropdown to select the material to ensure the weight is calculated correctly.</li>
                    <li><strong>Override Mass (Optional):</strong> If you know the exact weight of your empty bottle, go to the Override tab, check "Override mass," and type in the value in grams.</li>
                    <li><strong>Confirm:</strong> Click OK.</li>
                </ol>
            </div>`,
            
            // Step 2: Adding the Transition
            `<h3>Adding the Transition</h3>
            <p>This simulates the curved shoulder and neck of the water bottle.</p>
            
            <div class="card">
                <h4>Configuration Steps:</h4>
                <ol class="steps-list">
                    <li><strong>Select Body Tube:</strong> Click on the Body Tube you just created in the left-hand tree.</li>
                    <li><strong>Add Transition:</strong> Click the Transition icon.</li>
                    <li><strong>Adjust Shape:</strong>
                        <ul>
                            <li><strong>Aft diameter:</strong> Change this to match the opening (neck) of your bottle.</li>
                            <li><strong>Transition shape:</strong> Use the dropdown to choose "Ellipsoid" or "Ogive" to best match the curve of a bottle.</li>
                        </ul>
                    </li>
                    <li><strong>Set Length:</strong> Tweak the Length slider until the shape matches your physical bottle.</li>
                    <li><strong>Set Material:</strong> Ensure the Component material matches what you selected for the Body Tube.</li>
                    <li><strong>Confirm:</strong> Click OK.</li>
                </ol>
            </div>`,
            
            // Step 3: Attaching the Fins
            `<h3>Attaching the Fins</h3>
            <p>Fins are essential for stabilising your rocket in flight. Note that there is another dedicated video on how to design fins. This video is focused on showing how to attach them to the body tube.</p>
            
            <div class="card">
                <h4>Configuration Steps:</h4>
                <ol class="steps-list">
                    <li><strong>Select Body Tube:</strong> Ensure the Body Tube is selected in the rocket tree (fins must be attached to a tube).</li>
                    <li><strong>Choose Fin Type:</strong> Click on Trapezoidal, Elliptical, or Freeform fins.</li>
                    <li><strong>Positioning:</strong>
                        <ul>
                            <li><strong>Manual Drag:</strong> You can click and drag the fins on the 2D rocket view to move them.</li>
                            <li><strong>Precise Placement:</strong> In the General tab, use the Position relative to section to shift them up or down along the body tube.</li>
                        </ul>
                    </li>
                    <li><strong>Rotation:</strong> Use the Fin rotation slider if you need to offset the angle of the fins.</li>
                    <li><strong>Confirm:</strong> Click OK.</li>
                </ol>
            </div>`,
            
            // Step 4: Adding and Configuring a Nose Cone
            `<h3>Adding and Configuring a Nose Cone</h3>
            <p>The nose cone is the front component of your rocket that helps with aerodynamics.</p>
            
            <div class="card">
                <h4>Configuration Steps:</h4>
                <ol class="steps-list">
                    <li><strong>Select the Body Tube:</strong> In the "Rocket design" tab, click on the Body Tube in the component list.</li>
                    <li><strong>Add Nose Cone:</strong> Click the Nose Cone icon under "Body Components and Fin Sets."</li>
                    <li><strong>Position the Component:</strong> A dialogue box appears; click Insert here to place the nose cone at the front of the body tube. Then, rearrange it by clicking and dragging it to the top of the parts list.</li>
                    <li><strong>Adjust Shape:</strong> In the "Nose cone configuration" window:
                        <ul>
                            <li>Click the Nose cone shape dropdown (e.g., change from Ogive to Haack series or Parabolic series).</li>
                            <li>Adjust the <strong>Length</strong> and <strong>Base diameter</strong> sliders to match your specific bottle or rocket body.</li>
                        </ul>
                    </li>
                    <li><strong>Review in 3D:</strong> Change the View Type dropdown from "Side view" to 3D Figure to inspect the 360-degree model.</li>
                </ol>
            </div>`,
            
            // Step 5: Running Flight Simulations
            `<h3>Running Flight Simulations</h3>
            <p>Once your rocket design is complete, you can run simulations to predict its flight performance.</p>
            
            <div class="card">
                <h4>Simulation Steps:</h4>
                <ol class="steps-list">
                    <li><strong>Configure the Motor:</strong>
                        <ul>
                            <li>Go to the Motors & Configuration tab.</li>
                            <li>Check the box for Body Tube under "Motor mounts."</li>
                            <li>Click New Configuration.</li>
                            <li>Double-click the empty configuration slot to open the motor selection list.</li>
                            <li>Select your pre-defined motor (e.g., "BuckleyBlast") and click OK.</li>
                        </ul>
                    </li>
                    <li><strong>Set Up the Simulation:</strong>
                        <ul>
                            <li>Go to the Flight simulations tab.</li>
                            <li>Click New simulation.</li>
                            <li>(Optional) Click Edit simulation to adjust Launch conditions like wind speed, wind direction, or launch rod length. Click OK.</li>
                        </ul>
                    </li>
                    <li><strong>Run and Analyse:</strong>
                        <ul>
                            <li>Click Run simulations.</li>
                            <li>Look at the Apogee column for a quick estimate of the maximum altitude.</li>
                        </ul>
                    </li>
                    <li><strong>Plot Data:</strong>
                        <ul>
                            <li>Double-click the simulation entry to open the "Edit simulation" window.</li>
                            <li>Go to the Plot data tab.</li>
                            <li>Select a preset (e.g., Vertical motion vs. time).</li>
                            <li>Click Plot to view the graph.</li>
                            <li><strong>Tip:</strong> Check the Show data points box at the bottom of the graph window to see exact values at specific time intervals.</li>
                        </ul>
                    </li>
                </ol>
            </div>`
        ];

        // Define your media content (right panel)
        const stepMedia = [
            // Step 0: Introduction
            `<div class="alert-box alert-info">
                <p><strong>Tutorial Overview</strong></p>
                <p>This tutorial will guide you through creating a complete water rocket design in OpenRocket. You'll learn how to configure each component, set appropriate materials and dimensions, and run simulations to predict your rocket's flight performance.</p>
            </div>

            `,
            
            // Step 1: Creating the Body Tube
            `<div style="position: relative; width: 100%; height: 0; padding-top: 56.2500%;
 padding-bottom: 0; box-shadow: 0 2px 8px 0 rgba(63,69,81,0.16); margin-top: 1.6em; margin-bottom: 0.9em; overflow: hidden;
 border-radius: 8px; will-change: transform;">
  <iframe loading="lazy" style="position: absolute; width: 100%; height: 100%; top: 0; left: 0; border: none; padding: 0;margin: 0;"
    src="https://www.canva.com/design/DAG8FhQ8YYg/W2fMNcd0beJtQ7E1jqn4_g/watch?embed" allowfullscreen="allowfullscreen" allow="fullscreen">
  </iframe>
</div>

<div class="card">
    <h4>Diameter Reference Diagram</h4>
    <div class="image-container">
        <img src="diameter-diagram.png" alt="Diagram showing outer diameter, inner diameter, and wall thickness measurements" style="max-width: 100%; border-radius: var(--border-radius);">
    </div>
    <p style="text-align: center; margin-top: 10px; font-size: 0.9em;">Reference diagram showing the relationship between outer diameter, inner diameter, and wall thickness.</p>
</div>`,
            
            // Step 2: Adding the Transition
            `<div style="position: relative; width: 100%; height: 0; padding-top: 56.2500%;
 padding-bottom: 0; box-shadow: 0 2px 8px 0 rgba(63,69,81,0.16); margin-top: 1.6em; margin-bottom: 0.9em; overflow: hidden;
 border-radius: 8px; will-change: transform;">
  <iframe loading="lazy" style="position: absolute; width: 100%; height: 100%; top: 0; left: 0; border: none; padding: 0;margin: 0;"
    src="https://www.canva.com/design/DAG8Fh5u2Iw/yLXz27kKYkh230gpDBzxxg/watch?embed" allowfullscreen="allowfullscreen" allow="fullscreen">
  </iframe>
</div>

<div class="tip-box">
    <div class="tip-title"><i class="fas fa-lightbulb"></i> Tip</div>
    <p>The transition shape should closely match the physical curve of your bottle's shoulder. "Ellipsoid" works well for most standard bottles, while "Ogive" can be used for bottles with a more pointed shoulder.</p>
</div>`,
            
            // Step 3: Attaching the Fins
            `<div style="position: relative; width: 100%; height: 0; padding-top: 56.2500%;
 padding-bottom: 0; box-shadow: 0 2px 8px 0 rgba(63,69,81,0.16); margin-top: 1.6em; margin-bottom: 0.9em; overflow: hidden;
 border-radius: 8px; will-change: transform;">
  <iframe loading="lazy" style="position: absolute; width: 100%; height: 100%; top: 0; left: 0; border: none; padding: 0;margin: 0;"
    src="https://www.canva.com/design/DAG8Fl98YPo/bYzMdw7pQSFS3TZuJRrHVA/watch?embed" allowfullscreen="allowfullscreen" allow="fullscreen">
  </iframe>
</div>

`,
            
            // Step 4: Adding and Configuring a Nose Cone
            `<div style="position: relative; width: 100%; height: 0; padding-top: 56.2500%;
 padding-bottom: 0; box-shadow: 0 2px 8px 0 rgba(63,69,81,0.16); margin-top: 1.6em; margin-bottom: 0.9em; overflow: hidden;
 border-radius: 8px; will-change: transform;">
  <iframe loading="lazy" style="position: absolute; width: 100%; height: 100%; top: 0; left: 0; border: none; padding: 0;margin: 0;"
    src="https://www.canva.com/design/DAG8FtC3GUQ/Ya-ySsCrCJo7KI9KgkwMhg/watch?embed" allowfullscreen="allowfullscreen" allow="fullscreen">
  </iframe>
</div>

`,
            
            // Step 5: Running Flight Simulations
            `<div style="position: relative; width: 100%; height: 0; padding-top: 56.2500%;
 padding-bottom: 0; box-shadow: 0 2px 8px 0 rgba(63,69,81,0.16); margin-top: 1.6em; margin-bottom: 0.9em; overflow: hidden;
 border-radius: 8px; will-change: transform;">
  <iframe loading="lazy" style="position: absolute; width: 100%; height: 100%; top: 0; left: 0; border: none; padding: 0;margin: 0;"
    src="https://www.canva.com/design/DAG8FqAMHqk/SRcSlaX_2KxYPPsfR7U0NQ/watch?embed" allowfullscreen="allowfullscreen" allow="fullscreen">
  </iframe>
</div>

<div class="alert-box alert-info">
    <p><strong><i class="fas fa-chart-line"></i> Understanding Your Results</strong></p>
    <p>The apogee value represents the maximum height your rocket will reach. Use the plot data feature to see detailed information about velocity, acceleration, and altitude throughout the flight. This helps you optimise your design for better performance.</p>
</div>`
        ];

        // Current step tracking
        let currentStep = 0;
        const totalSteps = stepInstructions.length;

        // DOM Elements
        const stepButtons = document.querySelectorAll('.step-button');
        const stepTitleEl = document.getElementById('current-step-title');
        const instructionsPanel = document.getElementById('step-instructions');
        const mediaContent = document.getElementById('media-content');
        const contentTitle = document.getElementById('content-title');
        const prevButton = document.getElementById('prevButton');
        const nextButton = document.getElementById('nextButton');
        const progressBar = document.querySelector('.progress');
        const progressPercentage = document.getElementById('progress-percentage');

        // Image modal
        const modal = document.getElementById('imageModal');
        const modalImg = document.getElementById('modalImage');
        const modalClose = document.querySelector('.modal-close');

        // Initialize the tutorial
        function showStep(step) {
            // Update active step button
            stepButtons.forEach((button, index) => {
                button.classList.toggle('active', index === step);
            });

            // Update step title
            stepTitleEl.textContent = stepTitles[step];
            contentTitle.textContent = stepTitles[step];

            // Update content
            instructionsPanel.innerHTML = stepInstructions[step];
            mediaContent.innerHTML = stepMedia[step];

            // Update navigation buttons
            prevButton.disabled = step === 0;
            nextButton.style.display = step === totalSteps - 1 ? 'none' : 'flex';
            
            // Update progress
            const progress = Math.round(((step + 1) / totalSteps) * 100);
            progressBar.style.width = `${progress}%`;
            progressPercentage.textContent = `${progress}%`;
            
            currentStep = step;
        }

        // Simple tooltip implementation
        function setupTooltips() {
            // Remove any existing tooltips
            const existingTooltips = document.querySelectorAll('.tooltip');
            existingTooltips.forEach(t => t.remove());
            
            // Create new tooltip element
            const tooltip = document.createElement('div');
            tooltip.className = 'tooltip';
            document.body.appendChild(tooltip);
            
            // Add event listeners to all step buttons
            const stepButtons = document.querySelectorAll('.step-button');
            stepButtons.forEach(button => {
                const tooltipText = button.getAttribute('data-tooltip');
                if (!tooltipText) return;
                
                // On mouse enter
                button.addEventListener('mouseenter', () => {
                    // Set tooltip text
                    tooltip.textContent = tooltipText;
                    
                    // Position tooltip based on viewport width
                    const rect = button.getBoundingClientRect();
                    if (window.innerWidth <= 1024) {
                        // Position below on mobile
                        tooltip.className = 'tooltip bottom';
                        tooltip.style.top = `${rect.bottom + 10}px`;
                        tooltip.style.left = `${rect.left + rect.width/2}px`;
                        tooltip.style.transform = 'translateX(-50%)';
                    } else {
                        // Position to the right on desktop
                        tooltip.className = 'tooltip right';
                        tooltip.style.top = `${rect.top + rect.height/2}px`;
                        tooltip.style.left = `${rect.right + 10}px`;
                        tooltip.style.transform = 'translateY(-50%)';
                    }
                    
                    // Make tooltip visible
                    tooltip.style.opacity = '1';
                });
                
                // On mouse leave
                button.addEventListener('mouseleave', () => {
                    tooltip.style.opacity = '0';
                });
            });
        }

        // Event Listeners
        stepButtons.forEach((button, index) => {
            button.addEventListener('click', () => showStep(index));
        });

        prevButton.addEventListener('click', () => {
            if (currentStep > 0) showStep(currentStep - 1);
        });

        nextButton.addEventListener('click', () => {
            if (currentStep < totalSteps - 1) showStep(currentStep + 1);
        });

        // Image modal functionality
        document.addEventListener('click', (e) => {
            if (e.target.tagName === 'IMG' && e.target.parentElement.classList.contains('image-container')) {
                modal.style.display = 'block';
                modalImg.src = e.target.src;
                modalImg.alt = e.target.alt;
            }
        });

        modalClose.addEventListener('click', () => {
            modal.style.display = 'none';
        });

        modal.addEventListener('click', (e) => {
            if (e.target === modal) {
                modal.style.display = 'none';
            }
        });

        // Close modal with Escape key
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape' && modal.style.display === 'block') {
                modal.style.display = 'none';
            }
        });

        // Creator name with confetti
        document.getElementById('creator-name').addEventListener('click', () => {
            confetti({
                particleCount: 100,
                spread: 70,
                origin: { y: 0.8 },
                colors: ['#002654', '#f7f7f7', '#f0f0f0', '#191919']
            });
        });

        // Initialize with first step and set up tooltips
        document.addEventListener('DOMContentLoaded', () => {
            showStep(0);
            setupTooltips();
            
            // Update tooltips on window resize
            window.addEventListener('resize', () => {
                setupTooltips();
            });
            
            // Update tooltips whenever a step button is clicked
            document.querySelectorAll('.step-button').forEach(button => {
                button.addEventListener('click', () => {
                    setTimeout(setupTooltips, 100);
                });
            });
        });
    </script>
</body>
</html>
